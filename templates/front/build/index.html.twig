{% extends 'base.html.twig' %}

{% block title %}All builds{% endblock %}

{% block body %}
    <h1 class="text-6xl my-28 text-[#202020] dark:text-[#F1F1F1] font-bold">All builds</h1>

    <p class="text-2xl mb-20 mx-20 text-center text-[#202020] dark:text-[#F1F1F1]">Contribute to our community by sharing your knowledge and theorizing about the best (or worst) possible builds.</p>

   <div class="fixed z-10 w-full px-10 mt-24 flex flex-col items-end space-y-4">
        {% for message in app.flashes('success') %}
            <div class="bg-green-500/50 text-[#F1F1F1]-700 border-2 border-green-500 rounded-md w-fit text-center font-bold p-2">
                {{ message }}
        </div>
        {% endfor %}
    </div>


    <div class="flex flex-col items-center w-full font-bold text-center px-8 lg:px-40 mb-20">
        <a href="{{ path('app_create_build') }}" class="bg-[#65C986] hover:bg-[#C5C5C5] text-[#202020] py-2 px-3 rounded-xl mb-4 w-full">Create New Build</a>
    </div>

    <div class="flex flex-wrap w-full justify-center items-center px-10 lg:px-20 space-y-10 lg:space-y-20 drop-shadow-lg lg:mb-40 mb-20">
        {% for build in builds %}

        {# COMPUTER LG:1024 #}
            <a class="lg:w-full" href="{{ path('app_build_front_details' , {'title': build.title}) }}">
                <div class="hidden lg:flex w-full text-center bg-[#FFFFFF] dark:bg-[#494A56] rounded-md h-48">

                    {# image #}
                    <img src="{{ build.champion.squarePortrait }}" alt="{{ build.champion.name }}" class="self-left rounded-tl-md rounded-bl-md">

                    {# ::title + object #}
                    <div class="h-full flex flex-col justify-around w-full pb-4">
                        <div class="flex px-6 w-full justify-between">
                            <p class="capitalize font-bold text-2xl">{{build.title}}</p>
                            <p>Creation : {{build.created|date("d/m/Y")}}</p>
                        </div>
                        
                        <div class="flex items-center w-full scroll-x-hidden px-5 space-x-6">
                        {% for slot in build.slots %}              
                            {% for item in slot.item %}
                                <img src="{{ item.icon }}" alt="{{ item.name }}" class="rounded-full">
                            {% endfor %}
                        {% endfor %}
                        </div>
                    </div>

                    {# like/dislike #}
                    <div class="border-l-2 border-[#f1f1ff1] dark:border-[#3B3C44] ml-auto h-full flex items-center justify-center px-4">
                        <p>like</p>
                    </div>
                </div>
            </a> 

        {# PHONE  #}
            <a href="{{ path('app_build_front_details' , {'title': build.title}) }} ">
                <div class="lg:hidden flex flex-col items-center mx-4 md:mx-10 text-center bg-[#FFFFFF] dark:bg-[#494A56] rounded-md w-[256px] h-[410px]">

                    {# image #}
                    <img src="{{ build.champion.splashArt }}" alt="{{ build.champion.name }}" class="rounded-t-md w-full h-auto object-cover">

                    {# title + object #}
                    <div class="flex flex-col justify-around h-full w-full p-4 space-y-4">
                        <div class="flex flex-col items-center">
                            <p class="capitalize mt-2 text-xl font-bold max-h-[64px] line-clamp-2 overflow-hidden text-ellipsis">{{build.title}}</p>
                            <p class="text-xs my-2">Creation : {{build.created|date("d/m/Y")}}</p>
                        </div>

                        <div class="flex w-full scroll-x-hidden px-1 space-x-3 my-2">
                            {% for slot in build.slots %}
                                {% for item in slot.item %}
                                    <img src="{{ item.icon }}" alt="{{ item.name }}" class="rounded-full h-10 w-10">
                                {% endfor %}
                            {% endfor %}
                        </div>
                    </div>

                    {# like/dislike #}
                    <div class="border-t-2 border-[#f1f1ff1] dark:border-[#3B3C44] min-h-14 flex items-center justify-center w-full">
                        <p class="text-sm">like</p>
                    </div>
                </div>
            </a>
        {% else %}
            <p>It seems that an error occurred while loading this page. Please excuse us for the inconvenience caused.</p>
        {% endfor %}
        </div>
{% endblock %}
